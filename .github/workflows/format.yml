name: Formatting

on:
  pull_request:
  push:
    branches: ["master"]

jobs:
  fourmolu:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v4
    - uses: haskell-actions/run-fourmolu@v11
      with:
        version: "0.12.0.0"
        # NOTE: Keep this in sync with `../../Makefile`
        pattern: |
          bootstrap/**/*.hs
          buildinfo-reference-generator/**/*.hs
          Cabal/**/*.hs
          Cabal-QuickCheck/**/*.hs
          Cabal-described/**/*.hs
          Cabal-hooks/**/*.hs
          Cabal-syntax/**/*.hs
          Cabal-tests/**/*.hs
          Cabal-testsuite/main/**/*.hs
          Cabal-testsuite/src/**/*.hs
          Cabal-testsuite/static/**/*.hs
          Cabal-tree-diff/**/*.hs
          cabal-benchmarks/**/*.hs
          cabal-dev-scripts/**/*.hs
          cabal-install/**/*.hs
          cabal-install-solver/**/*.hs
          cabal-validate/**/*.hs
          solver-benchmarks/**/*.hs
